import { expect } from 'chai';

import { Registry } from '.';

interface ITestService {
  value: string;
}

class TestService implements ITestService {
  get value(): string {
    return this._value;
  }
  set value(val: string) {
    this._value = val;
  }

  private _value: string;
}

describe('registry', () => {
  it('defines a service', () => {
    // ARRANGE
    const registry = new Registry();

    // ACT
    registry.for('my-service').use(() => new TestService());
    const result = registry.get<ITestService>('my-service');

    // ASSERT
    expect(result).to.be.instanceOf(TestService);
  });
});
